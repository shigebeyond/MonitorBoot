# 监控java进程的pid
- monitor_jpid:
    grep: java | jvisualvm
    when_no_run: # 没运行时执行以下步骤
      - exec: jvisualvm

# 定时做系统告警
- schedule(10):
    - when_alert: # 发生告警时要执行以下步骤
        - dump_heap: 'dump告警内存' # dump堆快照
        - send_alert_email: # 发告警邮件
    - alert: # 告警
        # 告警条件
        - mem_free <= 1024M # 剩余内存 <= 1024M
- schedule(10):
    - when_alert: # 发生告警时要执行以下步骤
        - dump_thread: # dump线程快照
        - send_alert_email: # 发告警邮件
    - alert: # 告警
        # 告警条件
        - cpu_percent >= 90 # cpu使用率 >= 90%
        # - disk_percent >= 90 # 磁盘使用率 >= 90%

# 监控gc日志
- monitor_gc_log(../logs/gc2.log):
    - when_alert: # 发生告警时要执行以下步骤
        - send_alert_email: # 发告警邮件
    - alert: # 告警
          - ygc.costtime > 10 # gc耗时 > 10s
          - fgc.costtime > 10
          - fgc.interval < 1 # gc间隔时间 < 1s

